# 第二次上机报告

> 2233316027 王博想

## 1. 输出九九乘法表

### 问题重述

按如下形式打印九九乘法表

```
1×1=1
1×2=2 2×2=4
1×3=3 2×3=6 3×3=9
1×4=4 2×4=8 3×4=12 4×4=16
1×5=5 2×5=10 3×5=15 4×5=20 5×5=25
1×6=6 2×6=12 3×6=18 4×6=24 5×6=30 6×6=36
1×7=7 2×7=14 3×7=21 4×7=28 5×7=35 6×7=42 7×7=49
1×8=8 2×8=16 3×8=24 4×8=32 5×8=40 6×8=48 7×8=56 8×8=64
1×9=9 2×9=18 3×9=27 4×9=36 5×9=45 6×9=54 7×9=63 8×9=72 9×9=81 
```

### 实现思想

利用列表推导式， `for i in range(1,10)` 控制行数，从 1 到 9；`for j in range(1,i+1)` 控制每一行的列数，确保 `j<=i`，实现上三角形排列。

2. **格式化字符串**

• f"\n{j}x{i}={i*j} " 生成形如 2x3=6 的字符串。

• \n 只在 j=1 时生效，即每行首个表达式前换行。

3. **切片操作**

• [j>1:]：j>1 为 True 时，转换为 1，跳过 \n，确保只有第一列换行。

• [i<2:]：i<2 仅在 i=1 为 True，即 i=1 时不去掉 \n，保持第一行正确。

4. **’’.join()**

• 将所有字符串连接并打印，实现了格式整齐的九九乘法表输出。

### 源代码

```python
print(''.join(f"\n{j}x{i}={i*j} "[j>1:][i<2:] for i in range(1,10) for j in range(1,i+1)))
```

### 结果及说明

```
1×1=1
1×2=2 2×2=4
1×3=3 2×3=6 3×3=9
1×4=4 2×4=8 3×4=12 4×4=16
1×5=5 2×5=10 3×5=15 4×5=20 5×5=25
1×6=6 2×6=12 3×6=18 4×6=24 5×6=30 6×6=36
1×7=7 2×7=14 3×7=21 4×7=28 5×7=35 6×7=42 7×7=49
1×8=8 2×8=16 3×8=24 4×8=32 5×8=40 6×8=48 7×8=56 8×8=64
1×9=9 2×9=18 3×9=27 4×9=36 5×9=45 6×9=54 7×9=63 8×9=72 9×9=81 
```

结果表明：

三至六位数的水仙花数有 $153, \; 370, \; 371, \; 407, \;  1634, \; 8208, \; 9474, \; 54748, \; 92727, \; 93084, \; 548834$

其中三位数的是：$153, \; 370,\;371, \;407$，四位数的是：$1634, \;8208,\;9474$，五位数的是：$54748 ,\;92727 , \;93084$，六位数的是：$548834$ 

## 2. 计算 $\sin x$ 的值

### 问题重述

已知 $\sin x \approx x - \dfrac{x^3}{3!} + \dfrac{x^5}{5!} - \dfrac{x^7}{7!} + \dfrac{x^9}{9!} + \cdots$， 若 $x = \dfrac{2}{5} \pi$，按此公式计算 $\sin x$ 的值，并精确到小数点后 $5$ 位。

### 实现思想

迭代法求解

采用尾递归实现，函数 `g(res, x, z, j)` 表示求的目标是 $\sin x$，当前计算到的值为 `res`，下一项 $\dfrac{(-1)^{i-1}x^{2i-1}}{(2i-1)!}$ 的值是 `z`，而 `j` 则存储 $2i$

若下一项的绝对值 $|z|<10^{-6}$ 则代表我们至少已经精确到了五位小数（甚至是六位，为了保险起见使用 `1e-6` 而非 `1e-5`），即可返回 `res`，否则继续计算下一项，$z \leftarrow \dfrac{-zx^2}{j(j+1)},\; j \leftarrow j+2$，即调用 `g(res+z, x, -z*x*x/j/(j+1), j+2)`

函数 `f(x)` 表示计算 $\sin x$ 精确到五位小数，即调用 `g(x, x, -x**3/6, 4)` 表示第一项算完后的状态；输出利用 `"%.5f"%...` 保留五位小数

### 源代码

```python
import math
def g(res, x, z, j):
    return res if abs(z)<1e-6 else g(res+z, x, -z*x*x/j/(j+1), j+2)
def f(x): return g(x, x, -x**3/6, 4)
print("%.5f"%f(2*math.pi/5))
```

### 结果及说明

```
0.95106
```

结果表明：

$\sin \dfrac{2}{5}\pi$ 精确到五位小数的值为 $0.95106$

## 3. 纸张折叠问题

### 问题重述

假设有一张无限大的纸可以任意地折叠，其厚度为 $0.104$ 毫米，那么要折叠多少次可以超过珠穆朗玛峰的高度？如果能折叠 $100$ 次，那么将会有多厚？能否冲出银河系？

### 实现思想

设 $d$ 为纸张的厚度，则每一次折叠会使 $d \leftarrow 2d$，所以折叠 $n$ 次以后的厚度为 $2^{n}d$

设珠穆朗玛峰的高度 $h$，则折叠 $n$ 次超过珠穆朗玛峰高度即

$$
2^{n}d>h\implies n>\log_{2}\left(\dfrac{h}{d}\right) \xRightarrow{\;n\in \mathbb{N}\;} n \geq \left\lfloor \log_{2} \left( \dfrac{h}{d} \right)+1  \right\rfloor 
$$

所以最少需要 $\left\lfloor \log_{2} \left( \dfrac{h}{d} \right)+1  \right\rfloor$ 次折叠

### 源代码

```python
import math
h,d=8844.43,0.104*1e-3
print(math.floor(1+math.log2(h/d)))
print("%.5e"%(d*2**100))
```

### 结果及说明

```
27
1.31836e+26
```

结果表明：

1. 折叠 $27$ 的纸厚度超过珠穆朗玛峰高度
2. 折叠 $100$ 次的纸厚度约为 $1.31836 \times 10^{26} \;\mathrm{m}$
3. 而虽然银河系的直径没有确切值（不同的来源给出的数值不同），但是基本可以确定不超过 $5 \times 10 ^{6}\; \text{ly} \approx 4.730 \times 10 ^{22}\;\mathrm{m}$，所以折叠 $100$ 次的纸冲出了银河系