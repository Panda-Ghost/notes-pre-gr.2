# 第一次上机报告

> 2233316027 王博想

## 1. 寻找水仙花数

### 问题重述

水仙花数 (Narcissistic number) 也被称为超完全数字不变数 (pluperfect digital invariant, PPDI)、自恋数、自幂数、阿姆斯壮数或阿姆斯特朗数 (Armstrong number)。水仙花数是指一种特殊的数字序列，是指一个 $n$ 位数 ($n \geq 3$)，其每个数位上的数字的 $n$ 次幂之和等该数本身，即

$$
\overline{a_1 a_2 \cdots a_n} = \sum_{i=1}^{n} (a_i)^n, \quad n \geq 3
$$

编写程序寻找 $n=3,4,5,6$ 时所有的水仙花数。

### 实现思想

枚举法

$$
\overline{a_1 a_2 \cdots a_n} = \sum_{i=1}^{n} (a_i)^n, \quad n \geq 3
$$

对于一个数 `x` 我们考虑如何判断它是不是水仙花数，我们可以令 `s = str(x)` ，则 $n$ 即为 `len(s)`，$a_{i}$ 即为 `int(s[j])`，通过 `map` 函数，可以将 `s` 的每一位的 $n$ 次方计算出来，再使用 `sum` 即可得到右式

以 $371$ 为例，`x = 371`，则 `s = str(s) = '371'`，`n = len(s) = 3`，

则 `map(lambda x: int(x) ** len(s), s) = [3 ** 3, 7 ** 3, 1 ** 3] = [27, 343, 1]`

所以 `sum(...) = 27 + 343 + 1 = 371 == x` 其中 `...` 代指上式

所以我们写出源代码的第一行 `f(s)` 用来判断字符串 `s` 对应的数是否是水仙花数，则 `f(str(x))` 判断整数 `x` 是否是水仙花数

使用 `filter` 函数取出 `range(100, 10 ** 6)` 即 $[100,10^6) \cap \mathbb{Z}$ 所有的三四五六位数的整数其中的水仙花数，转换成 `list` 类型输出

### 源代码

```python
def f(s): return int(s)==sum(map(lambda x:int(x)**len(s),s))
res=list(filter(lambda x:f(str(x)), range(100, 10**6)))
print(res)
```

### 结果及说明

```
[153, 370, 371, 407, 1634, 8208, 9474, 54748, 92727, 93084, 548834]
```

结果表明：

三至六位数的水仙花数有 $153, \; 370, \; 371, \; 407, \;  1634, \; 8208, \; 9474, \; 54748, \; 92727, \; 93084, \; 548834$

其中三位数的是：$153, \; 370,\;371, \;407$，四位数的是：$1634, \;8208,\;9474$，五位数的是：$54748 ,\;92727 , \;93084$，六位数的是：$548834$ 

## 2. 计算 $\sin x$ 的值

### 问题重述

已知 $\sin x \approx x - \dfrac{x^3}{3!} + \dfrac{x^5}{5!} - \dfrac{x^7}{7!} + \dfrac{x^9}{9!} + \cdots$， 若 $x = \dfrac{2}{5} \pi$，按此公式计算 $\sin x$ 的值，并精确到小数点后 $5$ 位。

### 实现思想

迭代法求解

采用尾递归实现，函数 `g(res, x, z, j)` 表示求的目标是 $\sin x$，当前计算到的值为 `res`，下一项 $\dfrac{(-1)^{i-1}x^{2i-1}}{(2i-1)!}$ 的值是 `z`，而 `j` 则存储 $2i$

若下一项的绝对值 $|z|<10^{-6}$ 则代表我们至少已经精确到了五位小数（甚至是六位，为了保险起见使用 `1e-6` 而非 `1e-5`），即可返回 `res`，否则继续计算下一项，$z \leftarrow \dfrac{-zx^2}{j(j+1)},\; j \leftarrow j+2$，即调用 `g(res+z, x, -z*x*x/j/(j+1), j+2)`

函数 `f(x)` 表示计算 $\sin x$ 精确到五位小数，即调用 `g(x, x, -x**3/6, 4)` 表示第一项算完后的状态；输出利用 `"%.5f"%...` 保留五位小数

### 源代码

```python
import math
def g(res, x, z, j):
    return res if abs(z)<1e-6 else g(res+z, x, -z*x*x/j/(j+1), j+2)
def f(x): return g(x, x, -x**3/6, 4)
print("%.5f"%f(2*math.pi/5))
```

### 结果及说明

```
0.95106
```

结果表明：

$\sin \dfrac{2}{5}\pi$ 精确到五位小数的值为 $0.95106$

## 3. 纸张折叠问题

### 问题重述

假设有一张无限大的纸可以任意地折叠，其厚度为 $0.104$ 毫米，那么要折叠多少次可以超过珠穆朗玛峰的高度？如果能折叠 $100$ 次，那么将会有多厚？能否冲出银河系？

### 实现思想

设 $d$ 为纸张的厚度，则每一次折叠会使 $d \leftarrow 2d$，所以折叠 $n$ 次以后的厚度为 $2^{n}d$

设珠穆朗玛峰的高度 $h$，则折叠 $n$ 次超过珠穆朗玛峰高度即

$$
2^{n}d>h\implies n>\log_{2}\left(\dfrac{h}{d}\right) \xRightarrow{\;n\in \mathbb{N}\;} n \geq \left\lfloor \log_{2} \left( \dfrac{h}{d} \right)+1  \right\rfloor 
$$

所以最少需要 $\left\lfloor \log_{2} \left( \dfrac{h}{d} \right)+1  \right\rfloor$ 次折叠

### 源代码

```python
import math
h,d=8844.43,0.104*1e-3
print(math.floor(1+math.log2(h/d)))
print("%.5e"%(d*2**100))
```

### 结果及说明

```
27
1.31836e+26
```

结果表明：

1. 折叠 $27$ 的纸厚度超过珠穆朗玛峰高度
2. 折叠 $100$ 次的纸厚度约为 $1.31836 \times 10^{26} \;\mathrm{m}$
3. 而虽然银河系的直径没有确切值（不同的来源给出的数值不同），但是基本可以确定不超过 $5 \times 10 ^{6}\; \text{ly} \approx 4.730 \times 10 ^{22}\;\mathrm{m}$，所以折叠 $100$ 次的纸冲出了银河系